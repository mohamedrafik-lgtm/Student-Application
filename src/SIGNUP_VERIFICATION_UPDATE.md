# ุชุญุฏูุซ ุตูุญุฉ ุฅูุดุงุก ุงูุญุณุงุจ - ุงูุชุญูู ูู ุจูุงูุงุช ุงููุชุฏุฑุจ

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุญุฏูุซ ุตูุญุฉ ุฅูุดุงุก ุงูุญุณุงุจ ูุงุณุชุฎุฏุงู endpoint ุงูุชุญูู ูู ุจูุงูุงุช ุงููุชุฏุฑุจ ูู ุงูุฎุทูุฉ ุงูุฃูููุ ููุง ูุถูู ุฃู ุงููุณุชุฎุฏู ูุณุฌู ูู ุงููุธุงู ูุจู ุฅูุดุงุก ุงูุญุณุงุจ.

## โจ ุงูููุฒุงุช ุงููููุฌุฒุฉ

### ๐ง **ุชูุงูู API ุงูุฌุฏูุฏ**
- **Endpoint**: `/api/trainee-auth/verify-trainee`
- **Method**: POST
- **Data**: `{ nationalId: string, birthDate: string }`
- **Response**: ูุนูููุงุช ุงููุชุฏุฑุจ ูุญุงูุฉ ุงูุญุณุงุจ

### ๐จ **ุงูุชุญุณููุงุช ุนูู ุงููุงุฌูุฉ**
- **ุฒุฑ ุงูุชุญูู** ุจุฏูุงู ูู "ุงูุชุงูู" ูู ุงูุฎุทูุฉ ุงูุฃููู
- **ูุคุดุฑ ุงูุชุญููู** ุฃุซูุงุก ุงูุชุญูู
- **ุญุงูุฉ ุงูุชุญูู** ูุน ุงุณู ุงููุชุฏุฑุจ
- **ุฑุณุงุฆู ุชูุงุนููุฉ** ุญุณุจ ูุชูุฌุฉ ุงูุชุญูู

### ๐ฑ **ุงูููููุงุช ุงููุญุฏุซุฉ**

#### **1. ุงูุฎุทูุฉ ุงูุฃููู - ุงูุชุญูู ูู ุงูุจูุงูุงุช**
- **ุงูุชุญูู ุงูุชููุงุฆู** ุนูุฏ ุงูุถุบุท ุนูู "ุงูุชุญูู ูู ุงูุจูุงูุงุช"
- **ุนุฑุถ ุงุณู ุงููุชุฏุฑุจ** ุจุนุฏ ุงูุชุญูู ุงููุงุฌุญ
- **ูุนุงูุฌุฉ ุงูุญุณุงุจุงุช ุงูููุฌูุฏุฉ** ูุน ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ
- **ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ** ููุจูุงูุงุช ุบูุฑ ุงูุตุญูุญุฉ

#### **2. ูุนุงูุฌุฉ ุงูุงุณุชุฌุงุจุงุช**
- **ุญุณุงุจ ููุฌูุฏ**: ุนุฑุถ ุฎูุงุฑ ุชุณุฌูู ุงูุฏุฎูู ุฃู ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
- **ุญุณุงุจ ุบูุฑ ููุฌูุฏ**: ุงููุชุงุจุนุฉ ูุฅูุดุงุก ุงูุญุณุงุจ ุงูุฌุฏูุฏ
- **ุจูุงูุงุช ุฎุงุทุฆุฉ**: ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ

## ๐๏ธ **ุงููููู ุงูุชููู**

### **ุงููููุงุช ุงูููุญุฏุซุฉ:**

#### **1. Types (src/types/auth.ts)**
```typescript
// DTO ููุชุญูู ูู ุจูุงูุงุช ุงููุชุฏุฑุจ
export interface VerifyTraineeDto {
  nationalId: string;  // ุงูุฑูู ุงููููู
  birthDate: string;   // ุชุงุฑูุฎ ุงููููุงุฏ (YYYY-MM-DD)
}

// ุงุณุชุฌุงุจุฉ ุงูุชุญูู ูู ุจูุงูุงุช ุงููุชุฏุฑุจ
export interface VerifyTraineeResponse {
  traineeId: number;   // ูุนุฑู ุงููุชุฏุฑุจ
  nationalId: string;  // ุงูุฑูู ุงููููู
  name: string;        // ุงุณู ุงููุชุฏุฑุจ (ุจุงูุนุฑุจูุฉ)
  hasAccount: boolean; // ูู ููุฌุฏ ุญุณุงุจ ูุณุฌู ูุณุจูุงู
  phoneHint?: string;  // ุขุฎุฑ ุฑูููู ูู ุฑูู ุงููุงุชู (ููุฃูุงู)
}

// ุฃููุงุน ุฅุถุงููุฉ ููุชุญูู ูุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
export interface VerifyPhoneDto { ... }
export interface VerifyPhoneResponse { ... }
export interface CreatePasswordDto { ... }
export interface CreatePasswordResponse { ... }
export interface RequestPasswordResetDto { ... }
export interface RequestPasswordResetResponse { ... }
export interface VerifyResetCodeDto { ... }
export interface VerifyResetCodeResponse { ... }
export interface ResetPasswordDto { ... }
export interface ResetPasswordResponse { ... }
```

#### **2. API Configuration (src/services/apiConfig.ts)**
```typescript
export const API_CONFIG = {
  BASE_URL: 'http://10.0.2.2:4000',
  ENDPOINTS: {
    TRAINEE_LOGIN: '/api/trainee-auth/login',
    TRAINEE_PROFILE: '/api/trainee-auth/profile',
    VERIFY_TRAINEE: '/api/trainee-auth/verify-trainee',        // ุฌุฏูุฏ
    VERIFY_PHONE: '/api/trainee-auth/verify-phone',            // ุฌุฏูุฏ
    CREATE_PASSWORD: '/api/trainee-auth/create-password',      // ุฌุฏูุฏ
    REQUEST_PASSWORD_RESET: '/api/trainee-auth/request-password-reset', // ุฌุฏูุฏ
    VERIFY_RESET_CODE: '/api/trainee-auth/verify-reset-code',  // ุฌุฏูุฏ
    RESET_PASSWORD: '/api/trainee-auth/reset-password',        // ุฌุฏูุฏ
  },
  TIMEOUT: 10000,
} as const;
```

#### **3. Auth Service (src/services/authService.ts)**
```typescript
export class AuthService {
  // ุงูุชุญูู ูู ุจูุงูุงุช ุงููุชุฏุฑุจ
  static async verifyTrainee(data: VerifyTraineeDto): Promise<VerifyTraineeResponse> {
    const url = `${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.VERIFY_TRAINEE}`;
    return this.makeRequest<VerifyTraineeResponse>(url, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data),
    });
  }

  // ุงูุชุญูู ูู ุฑูู ุงููุงุชู
  static async verifyPhone(data: VerifyPhoneDto): Promise<VerifyPhoneResponse> { ... }

  // ุฅูุดุงุก ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ
  static async createPassword(data: CreatePasswordDto): Promise<CreatePasswordResponse> { ... }

  // ุทูุจ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
  static async requestPasswordReset(data: RequestPasswordResetDto): Promise<RequestPasswordResetResponse> { ... }

  // ุงูุชุญูู ูู ููุฏ ุฅุนุงุฏุฉ ุงูุชุนููู
  static async verifyResetCode(data: VerifyResetCodeDto): Promise<VerifyResetCodeResponse> { ... }

  // ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
  static async resetPassword(data: ResetPasswordDto): Promise<ResetPasswordResponse> { ... }
}
```

#### **4. Signup Screen (src/screens/SignupScreen.tsx)**
```typescript
const SignupScreen: React.FC<SignupScreenProps> = ({ onBack, onSignupSuccess }) => {
  const [isVerifying, setIsVerifying] = useState(false);
  const [verificationResult, setVerificationResult] = useState<VerifyTraineeResponse | null>(null);

  const handleVerifyTrainee = async () => {
    try {
      setIsVerifying(true);
      
      const verifyData: VerifyTraineeDto = {
        nationalId: signupData.personalInfo.nationalId,
        birthDate: signupData.personalInfo.birthDate,
      };

      const result = await AuthService.verifyTrainee(verifyData);
      setVerificationResult(result);
      
      if (result.hasAccount) {
        // ุนุฑุถ ุฎูุงุฑ ุชุณุฌูู ุงูุฏุฎูู ุฃู ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
        Alert.alert('ุญุณุงุจ ููุฌูุฏ', `ูุฑุญุจุงู ${result.name}!...`);
      } else {
        // ุงููุชุงุจุนุฉ ูุฅูุดุงุก ุงูุญุณุงุจ ุงูุฌุฏูุฏ
        Alert.alert('ุชู ุงูุชุญูู ุจูุฌุงุญ', `ูุฑุญุจุงู ${result.name}!...`);
      }
    } catch (error) {
      // ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
    } finally {
      setIsVerifying(false);
    }
  };

  const handleNext = async () => {
    if (validateCurrentStep()) {
      if (currentStep === 1) {
        await handleVerifyTrainee(); // ุงูุชุญูู ูู ุงูุจูุงูุงุช
      } else if (currentStep < 3) {
        setCurrentStep(currentStep + 1);
      } else {
        handleSubmit();
      }
    }
  };
};
```

## ๐จ **ุงูุชุตููู ูุงููุงุฌูุฉ**

### **ุงูุฃููุงู ุงููุณุชุฎุฏูุฉ:**
- **Success**: `#10B981` (Emerald) ูุญุงูุฉ ุงูุชุญูู ุงููุงุฌุญ
- **Warning**: `#F59E0B` (Amber) ููุชุญุฐูุฑุงุช
- **Error**: `#EF4444` (Red) ููุฃุฎุทุงุก
- **Primary**: `#6366F1` (Indigo) ููุฃุฒุฑุงุฑ ุงูุฃุณุงุณูุฉ

### **ุงูุฃููููุดู:**
- **Loading State**: ูุคุดุฑ ุชุญููู ุฃุซูุงุก ุงูุชุญูู
- **Success Animation**: ุชุฃุซูุฑ ูุฌุงุญ ุนูุฏ ุงูุชุญูู
- **Error Animation**: ุชุฃุซูุฑ ุฎุทุฃ ุนูุฏ ุงููุดู
- **Smooth Transitions**: ุงูุชูุงูุงุช ุณูุณุฉ ุจูู ุงูุญุงูุงุช

### **ุงูุชุฎุทูุท:**
- **Verification Status**: ูุคุดุฑ ุญุงูุฉ ุงูุชุญูู
- **Dynamic Button Text**: ูุต ุงูุฒุฑ ูุชุบูุฑ ุญุณุจ ุงูุญุงูุฉ
- **Responsive Alerts**: ุฑุณุงุฆู ุชูุงุนููุฉ ุญุณุจ ุงููุชูุฌุฉ
- **Progress Indication**: ูุคุดุฑ ุงูุชูุฏู ุงููุญุณู

## ๐ **ุชุฏูู ุงูุนูู ุงูุฌุฏูุฏ**

### **1. ุจุฏุก ุฅูุดุงุก ุงูุญุณุงุจ:**
- ูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู โ ุงุถุบุท ุนูู "ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ"
- ุงูุงูุชูุงู ุฅูู ุตูุญุฉ ุฅูุดุงุก ุงูุญุณุงุจ

### **2. ุงูุฎุทูุฉ ุงูุฃููู - ุงูุชุญูู ูู ุงูุจูุงูุงุช:**
- ุฅุฏุฎุงู ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ (ุงูุงุณูุ ุงููููุฉุ ุชุงุฑูุฎ ุงููููุงุฏุ ุงูุฌูุณูุฉ)
- ุงุฎุชูุงุฑ ุงูุฌูุณ (ุฐูุฑ/ุฃูุซู)
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- **ุงูุชุญูู ูู ุงููุธุงู** ุนุจุฑ API
- **ูุนุงูุฌุฉ ุงููุชูุฌุฉ**:
  - โ **ุญุณุงุจ ููุฌูุฏ**: ุฎูุงุฑ ุชุณุฌูู ุงูุฏุฎูู ุฃู ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
  - โ **ุญุณุงุจ ุบูุฑ ููุฌูุฏ**: ุงููุชุงุจุนุฉ ููุฎุทูุฉ ุงูุชุงููุฉ
  - โ **ุจูุงูุงุช ุฎุงุทุฆุฉ**: ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ

### **3. ุงูุฎุทูุฉ ุงูุซุงููุฉ - ุจูุงูุงุช ุงูุงุชุตุงู:**
- ุฅุฏุฎุงู ุจูุงูุงุช ุงูุงุชุตุงู ูุงูุนููุงู
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- ุงูุงูุชูุงู ููุฎุทูุฉ ุงูุชุงููุฉ

### **4. ุงูุฎุทูุฉ ุงูุซุงูุซุฉ - ุจูุงูุงุช ููู ุงูุฃูุฑ:**
- ุฅุฏุฎุงู ุจูุงูุงุช ููู ุงูุฃูุฑ
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- ุฅูุดุงุก ุงูุญุณุงุจ

### **5. ุฅูุดุงุก ุงูุญุณุงุจ:**
- ุฅุฑุณุงู ุงูุจูุงูุงุช ููุฎุงุฏู
- ุนุฑุถ ุฑุณุงูุฉ ุงููุฌุงุญ
- ุงูุนูุฏุฉ ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

## ๐ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**

### **ุฃููุงุน ุงูุฃุฎุทุงุก ุงูููุนุงูุฌุฉ:**
1. **404 Not Found** - ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ุงููุชุฏุฑุจ
2. **400 Bad Request** - ุงูุจูุงูุงุช ุงููุฏุฎูุฉ ุบูุฑ ุตุญูุญุฉ
3. **Network Errors** - ุฃุฎุทุงุก ุงูุงุชุตุงู
4. **Server Errors** - ุฃุฎุทุงุก ุงูุฎุงุฏู

### **ุฑุณุงุฆู ุงูุฎุทุฃ:**
- **404**: "ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ุงููุชุฏุฑุจ ูู ุงููุธุงู"
- **400**: "ุงูุจูุงูุงุช ุงููุฏุฎูุฉ ุบูุฑ ุตุญูุญุฉ"
- **Default**: "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุชุญูู ูู ุงูุจูุงูุงุช"

### **ูุนุงูุฌุฉ ุงูุญุณุงุจุงุช ุงูููุฌูุฏุฉ:**
- **ุนุฑุถ ุงุณู ุงููุชุฏุฑุจ** ูู ุงูุงุณุชุฌุงุจุฉ
- **ุฎูุงุฑ ุชุณุฌูู ุงูุฏุฎูู** ููุนูุฏุฉ ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
- **ุฎูุงุฑ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ** ูููุชุงุจุนุฉ (ุฅุฐุง ูุงู ูุณููุญุงู)

## ๐ **ุงูุงุณุชุฎุฏุงู**

### **ุงูุชููู:**
1. ูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู โ ุงุถุบุท ุนูู "ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ"
2. ูู ุงูุฎุทูุฉ ุงูุฃููู โ ุฃุฏุฎู ุงูุจูุงูุงุช ูุงุถุบุท "ุงูุชุญูู ูู ุงูุจูุงูุงุช"
3. **ุฅุฐุง ูุงู ุงูุญุณุงุจ ููุฌูุฏ** โ ุงุฎุชุฑ ุชุณุฌูู ุงูุฏุฎูู ุฃู ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
4. **ุฅุฐุง ูู ููู ููุฌูุฏ** โ ุงุถุบุท "ูุชุงุจุนุฉ" ููุฎุทูุฉ ุงูุชุงููุฉ
5. ุฃููู ุจุงูู ุงูุฎุทูุงุช โ ุฃูุดุฆ ุงูุญุณุงุจ

### **ุงูุชุญูู:**
- **ุงูุชุญูู ุงูุชููุงุฆู** ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ ุงูุชุญูู
- **ูุคุดุฑ ุงูุชุญููู** ุฃุซูุงุก ุงูุชุญูู
- **ุฑุณุงุฆู ูุงุถุญุฉ** ุญุณุจ ุงููุชูุฌุฉ
- **ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ** ููุญุณุงุจุงุช ุงูููุฌูุฏุฉ

## ๐ฎ **ุงูุชุทููุฑ ุงููุณุชูุจูู**

### **ุงูููุฒุงุช ุงููุทููุจุฉ:**
- [ ] **ุงูุชุญูู ูู ุฑูู ุงููุงุชู** - ูู ุงูุฎุทูุฉ ุงูุซุงููุฉ
- [ ] **ุฅูุดุงุก ูููุฉ ุงููุฑูุฑ** - ูู ุงูุฎุทูุฉ ุงูุซุงูุซุฉ
- [ ] **ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ** - ูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
- [ ] **ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู** - ุฅุฑุณุงู ุฑุงุจุท ุงูุชุญูู
- [ ] **ุฑูุน ุงููุซุงุฆู** - ุฑูุน ุงููุซุงุฆู ุงููุทููุจุฉ
- [ ] **ุงูุชุญูู ุงูุจูููุชุฑู** - ุงูุชุญูู ูู ุงูุจุตูุฉ ุฃู ุงููุฌู

### **ุงูุชุญุณููุงุช ุงูููุชุฑุญุฉ:**
- [ ] **Auto-fill Data** - ููุก ุงูุจูุงูุงุช ุชููุงุฆูุงู ุจุนุฏ ุงูุชุญูู
- [ ] **Offline Verification** - ุงูุชุญูู ุงููุญูู ููุจูุงูุงุช ุงูุฃุณุงุณูุฉ
- [ ] **Biometric Verification** - ุงูุชุญูู ุงูุจูููุชุฑู
- [ ] **Document Upload** - ุฑูุน ุงููุซุงุฆู ุงููุทููุจุฉ
- [ ] **Progress Persistence** - ุญูุธ ุชูุฏู ุงููุณุชุฎุฏู
- [ ] **Real-time Validation** - ุงูุชุญูู ูู ุงูููุช ุงููุนูู

## ๐ฏ **ุงูุฎูุงุตุฉ**

ุชู ุชุญุฏูุซ ุตูุญุฉ ุฅูุดุงุก ุงูุญุณุงุจ ุจูุฌุงุญ ูุชุดูู:

โ **ุชูุงูู API ูุงูู** ูุน endpoint ุงูุชุญูู ูู ุงููุชุฏุฑุจ  
โ **ุชุญูู ุชููุงุฆู** ูู ุงูุจูุงูุงุช ูู ุงูุฎุทูุฉ ุงูุฃููู  
โ **ูุนุงูุฌุฉ ุฐููุฉ** ููุญุณุงุจุงุช ุงูููุฌูุฏุฉ  
โ **ุฑุณุงุฆู ุชูุงุนููุฉ** ูุงุถุญุฉ ููููุฏุฉ  
โ **ูุงุฌูุฉ ูุญุณูุฉ** ูุน ูุคุดุฑุงุช ุงูุญุงูุฉ  
โ **ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ** ูุฌููุน ุงูุณููุงุฑูููุงุช  
โ **ุชุฏูู ุนูู ููุทูู** ูููุธู  
โ **ููุฏ ูุธูู** ูุชุจุน ูุจุงุฏุฆ SOLID  

ุงููุชูุฌุฉ: ุตูุญุฉ ุฅูุดุงุก ุญุณุงุจ ูุชุทูุฑุฉ ูุขููุฉ ูุน ุงูุชุญูู ูู ุงูุจูุงูุงุช! ๐

## ๐ **ููุงุญุธุงุช ุฅุถุงููุฉ**

### **ุงูุฃูุงู:**
- **ุงูุชุญูู ูู ุงููููุฉ** ูุจู ุฅูุดุงุก ุงูุญุณุงุจ
- **ููุน ุงูุญุณุงุจุงุช ุงูููุฑุฑุฉ** ุบูุฑ ุงููุฑุบูุจ ูููุง
- **ุชูููุญ ุฑูู ุงููุงุชู** ููุฃูุงู ุงูุฅุถุงูู

### **ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:**
- **ุฑุณุงุฆู ูุงุถุญุฉ** ููู ุญุงูุฉ
- **ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ** ููุญุณุงุจุงุช ุงูููุฌูุฏุฉ
- **ูุคุดุฑุงุช ุจุตุฑูุฉ** ููุญุงูุฉ ุงูุญุงููุฉ
- **ุงูุชูุงูุงุช ุณูุณุฉ** ุจูู ุงูุฎุทูุงุช
